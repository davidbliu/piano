<head>
    <link rel = 'stylesheet' href = 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'/>
    <script src = 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js'></script>
    <script src = 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
    <title>WD Piano</title>
<style type = 'text/css'>
.key{
    margin: 15px;
    padding:10px;
    font-size:20px;
    border:1px solid rgba(0,0,0,0.1);
    float:left;
}
.key:hover{
    cursor:pointer;
}
.key:active{
    color:white;
    background-color:black;
}
#piano-div{
    display:block;
    clear:both;
}
#key-log{
    display:block;
    clear:both;
}
.centered{
    text-align:center;
}
#control-textarea{
    margin:15px;
    min-height:150px;
}
</style>
</head>
<body>
<h1 class = 'centered'>Welcome to the WD Piano</h1>
<div class = 'centered'>Click the keys to play sounds</div>
<div class = 'row'>
    <div class = 'col-md-4' id = 'control-sidebar'>
        <textarea id = 'control-textarea' class = 'form-control' placeholder = 'create key mappings here'></textarea>
        <div id = 'key-log'></div>
    </div>
    <div class = 'col-md-8' class = 'main-area'>
        <div id = 'piano-div' class = 'centered'></div>
    </div>
</div>

</body>
<script type = 'text/javascript'>
var keyMappings = {};
keyMappings['e']=13;
keyMappings['y']=43;
keyMappings['w']=12;
function buildKeyboard(){
    var MAX_KEY = 60;
    for (var i=1;i<MAX_KEY;i++){
        key = document.createElement('div');
        $(key).addClass('key');
        $(key).attr('id', i);
        $(key).text(i);
        $('#piano-div').append(key);
    }
    keyActions();
}
function playSound(key){
    var sound = new Audio('./sounds/piano/'+key.toString()+'.wav');
    sound.play();
    // add this play to the log
    oldText = $('#key-log').text();
    $('#key-log').text(oldText + key);
}
function keyActions(){
    $('.key').click(function(){
        playSound($(this).text());
    });
}
$(document).ready(function(){
    buildKeyboard();
});
</script>

